<div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 table-responsive">
<div class="row healthsummary">
  <strong class="col-xs-2 col-sm-2 col-md-2 col-lg-2">HP</strong>
  <div class="col-xs-10 col-sm-10 col-md-10 col-lg-10">
    <progress>
      <bar value="(((sheet.health - sheet.damage) / sheet.health) * 100) - 0.1|number:2" type="success">
        {{ sheet.health - sheet.damage }}
      </bar>
      <bar value="((sheet.damage / sheet.health) * 100)|number:2" type="danger">{{ sheet.damage }}</bar>
    </progress>
    <progress>
      <bar value="((sheet.nonlethal / sheet.health) * 100)|number:2" type="warning">{{ sheet.nonlethal }}</bar>
    </progress>
  </div>
</div>
<div class="row healthdetails">
  <div class="form-group col-xs-2 col-sm-2 col-md-2 col-lg-2">
    <label for="total">Total</label>
    <input type="number" class="form-control" id="total" ng-model="sheet.health" />
  </div>
  <div class="form-group col-xs-5 col-sm-5 col-md-5 col-lg-5">
    <label for="damage">Damage</label>
    <div class="input-group">
      <span class="input-group-btn">
        <button class="btn btn-default" type="button" ng-click="damagePlus()">
          <span class="glyphicon glyphicon-plus"></span>
        </button>
      </span>
      <input type="number" class="form-control" id="damage" ng-model="sheet.damage" />
      <span class="input-group-btn">
        <button class="btn btn-default" type="button" ng-click="damageMinus()">
          <span class="glyphicon glyphicon-minus"></span>
        </button>
      </span>
    </div>
  </div>
  <div class="form-group col-xs-5 col-sm-5 col-md-5 col-lg-5">
    <label for="nonlethal">Non-Lethal</label>
    <div class="input-group">
      <span class="input-group-btn">
        <button class="btn btn-default" type="button" ng-click="nonlethalPlus()">
          <span class="glyphicon glyphicon-plus"></span>
        </button>
      </span>
      <input type="number" class="form-control" id="nonlethal" ng-model="sheet.nonlethal" />
      <span class="input-group-btn">
        <button class="btn btn-default" type="button" ng-click="nonlethalMinus()">
          <span class="glyphicon glyphicon-minus"></span>
        </button>
      </span>
    </div>
  </div>
</div>
</div>
<div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 table-responsive">
  <div class="armorsummary">
    <div class="header">
      <span></span>
      <strong>Total</strong>
      <span></span>
      <strong>Base</strong>
      <span></span>
      <strong>Armor</strong>
      <span></span>
      <strong>Shield</strong>
      <span></span>
      <strong>Dex</strong>
      <span></span>
      <strong>Size</strong>
      <span></span>
      <strong>Natural</strong>
      <span></span>
      <strong>Deflection</strong>
      <span></span>
      <strong>Misc</strong>
    </div>
    <div>
      <strong>AC</strong>
      <output class="form-control" ng-bind="armorTotal"></output>
      <span>=</span>
      <span>10</span>
      <span>+</span>
      <output class="form-control" ng-bind="currentArmor"></output>
      <span>+</span>
      <output class="form-control" ng-bind="currentShield"></output>
      <span>+</span>
      <output class="form-control" ng-bind="modifier(ability_totals.dex)"></output>
      <span>+</span>
      <output class="form-control" ng-bind="sizeACMod"></output>
      <span>+</span>
      <output class="form-control" ng-bind="currentNaturalArmor"></output>
      <span>+</span>
      <output class="form-control" ng-bind="currentDeflectionMod"></output>
      <span>+</span>
      <input type="number" class="form-control" ng-model="sheet.armor_misc" />
    </div>
    <div class="spacer"></div>
    <div>
      <strong>Touch</strong>
      <output class="form-control" ng-bind="armorTouch"></output>
      <span>=</span>
      <span>10</span>
      <span>+</span>
      <span class="blank"></span>
      <span class="blank"></span>
      <span class="blank"></span>
      <span class="blank"></span>
      <output class="form-control" ng-bind="modifier(ability_totals.dex)"></output>
      <span>+</span>
      <output class="form-control" ng-bind="sizeACMod"></output>
      <span>+</span>
      <span class="blank"></span>
      <span class="blank"></span>
      <output class="form-control" ng-bind="currentDeflectionMod"></output>
      <span>+</span>
      <input type="number" class="form-control" ng-model="sheet.armor_touch_misc" />
    </div>
    <div class="spacer"></div>
    <div>
      <strong>Flat-Footed</strong>
      <output class="form-control" ng-bind="armorFlat"></output>
      <span>=</span>
      <span>10</span>
      <span>+</span>
      <output class="form-control" ng-bind="currentArmor"></output>
      <span>+</span>
      <output class="form-control" ng-bind="currentShield"></output>
      <span>+</span>
      <span class="blank"></span>
      <span class="blank"></span>
      <output class="form-control" ng-bind="sizeACMod"></output>
      <span>+</span>
      <output class="form-control" ng-bind="currentNaturalArmor"></output>
      <span>+</span>
      <output class="form-control" ng-bind="currentDeflectionMod"></output>
      <span>+</span>
      <input type="number" class="form-control" ng-model="sheet.armor_flat_misc" />
    </div>
  </div>
</div>

<div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 armorbuttons">
  <div class="btn-group btn-group-justified">
    <div class="btn-group"><button class="btn btn-default" ng-click="addArmor()">Add Armor</button></div>
    <div class="btn-group"><button class="btn btn-default" ng-click="addShield()">Add Shield</button></div>
    <div class="btn-group"><button class="btn btn-default" ng-click="addProtective()">Add Item</button></div>
  </div>
</div>
<hr />

<!-- Begin Armor -->
<div class="col-xs-12 col-sm-6 col-md-6 col-lg-4 armoritems" ng-repeat="item in sheet.armor">
  <div class="panel" ng-class="{'panel-success': item.equiped, 'panel-default': !item.equiped}"> 
    <div class="panel-heading">
      <div class="row">
        <div class="col-xs-2 col-sm-2 col-md-2 col-lg-2"><h4 class="charsheet-icon-armor"></h4></div> 
        <div class="col-xs-4 col-sm-4 col-md-4 col-lg-4">{{ item.name }}</div>
        <div class="col-xs-6 col-sm-6 col-md-6 col-lg-6 pull-right">
          <div class="btn-group pull-right">
            <button type="button" class="btn btn-default" ng-if="item.equiped" ng-click="deactivateArmor($index)">
              <span class="glyphicon glyphicon-ban-circle"></span>
            </button>
            <button type="button" class="btn btn-default" ng-if="!item.equiped" ng-click="activateArmor($index)">
              <span class="glyphicon glyphicon-ok-circle"></span>
            </button>

            <button type="button" class="btn btn-default" ng-click="removeArmor($index)">
              <span class="glyphicon glyphicon-trash"></span>
            </button>

            <button class="btn btn-default" ng-click="notCollapsed = !notCollapsed" ng-disabled="item.name == ''" ng-init="notCollapsed = (notCollapsed || item.name == '')">
              <span class="glyphicon glyphicon-chevron-up" ng-if="notCollapsed"></span>
              <span class="glyphicon glyphicon-chevron-down" ng-if="!notCollapsed"></span>
            </button>
          </div>
        </div>
      </div>
    </div>
    <div class="panel-body row" collapse="!notCollapsed">
      <div class="form-group col-xs-8 col-sm-8 col-md-8 col-lg-8">
        <label for="armor_{{ $index }}_name">Name</label>
        <input type="text" class="form-control" id="armor_{{ $index }}_name" ng-model="item.name" />
      </div>
      <div class="form-group col-xs-4 col-sm-4 col-md-4 col-lg-4">
        <label for="armor_{{ $index }}_type">Type</label>
        <input type="text" class="form-control" id="armor_{{ $index }}_type" ng-model="item.type" />
      </div>

      <div class="form-group col-xs-4 col-sm-4 col-md-4 col-lg-4">
        <label for="armor_{{ $index }}_bonus">AC Bonus</label>
        <input type="number" class="form-control" id="armor_{{ $index }}_bonus" ng-model="item.bonus" />
      </div>
      <div class="form-group col-xs-4 col-sm-4 col-md-4 col-lg-4">
        <label for="armor_{{ $index }}_max_dex_bonus">Max Dex</label>
        <input type="number" class="form-control" id="armor_{{ $index }}_max_dex_bonus" ng-model="item.max_dex_bonus" />
      </div>
      <div class="form-group col-xs-4 col-sm-4 col-md-4 col-lg-4">
        <label for="armor_{{ $index }}_check_penalty">Check Penalty</label>
        <input type="number" class="form-control" id="armor_{{ $index }}_check_penalty" ng-model="item.check_penalty" />
      </div>

      <div class="form-group col-xs-4 col-sm-4 col-md-4 col-lg-4">
        <label for="armor_{{ $index }}_spell_failure">Spell Failure</label>
        <div class="input-group">
          <input type="number" class="form-control" id="armor_{{ $index }}_spell_failure" ng-model="item.spell_failure" />
          <span class="input-group-addon">%</span>
        </div>
      </div>
      <div class="form-group col-xs-4 col-sm-4 col-md-4 col-lg-4">
        <label for="armor_{{ $index }}_speed">Speed</label>
        <input type="number" class="form-control" id="armor_{{ $index }}_speed" ng-model="item.speed" />
      </div>
      <div class="form-group col-xs-4 col-sm-4 col-md-4 col-lg-4">
        <label for="armor_{{ $index }}_weight">Weight</label>
        <div class="input-group">
          <input type="number" class="form-control" id="armor_{{ $index }}_weight" ng-model="item.weight" />
          <span class="input-group-addon">lb.</span>
        </div>
      </div>

      <div class="form-group col-xs-12 col-xm-12 col-md-12 col-lg-12">
        <label for="armor_{{ $index }}_special">Special Properties / Notes</label>
        <textarea type="text" class="form-control" id="armor_{{ $index }}_special" ng-model="item.special">
        </textarea>
      </div>
    </div>
  </div>
</div>
<!-- End Armor -->

<!-- Begin Sheidl -->
<div class="col-xs-12 col-sm-6 col-md-6 col-lg-4 armoritems" ng-repeat="item in sheet.shield">
  <div class="panel" ng-class="{'panel-success': item.equiped, 'panel-default': !item.equiped}"> 
    <div class="panel-heading">
      <div class="row">
        <div class="col-xs-2 col-sm-2 col-md-2 col-lg-2"><h4 class="charsheet-icon-shield"></h4></div> 
        <div class="col-xs-4 col-sm-4 col-md-4 col-lg-4">{{ item.name }}</div>
        <div class="col-xs-6 col-sm-6 col-md-6 col-lg-6">
          <div class="btn-group pull-right">
            <button type="button" class="btn btn-default" ng-if="item.equiped" ng-click="deactivateShield($index)">
              <span class="glyphicon glyphicon-ban-circle"></span>
            </button>

            <button type="button" class="btn btn-default" ng-if="!item.equiped" ng-click="activateShield($index)">
              <span class="glyphicon glyphicon-ok-circle"></span>
            </button>

            <button type="button" class="btn btn-default" ng-click="removeShield($index)">
              <span class="glyphicon glyphicon-trash"></span>
            </button>

            <button class="btn btn-default" ng-click="notCollapsed = !notCollapsed" ng-disabled="item.name == ''" ng-init="notCollapsed = (notCollapsed || item.name == '')">
              <span class="glyphicon glyphicon-chevron-up" ng-if="notCollapsed"></span>
              <span class="glyphicon glyphicon-chevron-down" ng-if="!notCollapsed"></span>
            </button>
          </div>
        </div>
      </div>
    </div>
    <div class="panel-body row" collapse="!notCollapsed">
      <div class="form-group col-xs-8 col-sm-8 col-md-8 col-lg-8">
        <label for="shield_{{ $index }}_name">Name</label>
        <input type="text" class="form-control" id="shield_{{ $index }}_name" ng-model="item.name" />
      </div>
      <div class="form-group col-xs-4 col-sm-4 col-md-4 col-lg-4">
        <label for="shield_{{ $index }}_bonus">AC Bonus</label>
        <input type="number" class="form-control" id="shield_{{ $index }}_bonus" ng-model="item.bonus" />
      </div>


      <div class="form-group col-xs-4 col-sm-4 col-md-4 col-lg-4">
        <label for="shield_{{ $index }}_check_penalty">Check Penalty</label>
        <input type="number" class="form-control" id="shield_{{ $index }}_check_penalty" ng-model="item.check_penalty" />
      </div>
      <div class="form-group col-xs-4 col-sm-4 col-md-4 col-lg-4">
        <label for="shield_{{ $index }}_spell_failure">Spell Failure</label>
        <div class="input-group">
          <input type="number" class="form-control" id="shield_{{ $index }}_spell_failure" ng-model="item.spell_failure" />
          <span class="input-group-addon">%</span>
        </div>
      </div>
      <div class="form-group col-xs-4 col-sm-4 col-md-4 col-lg-4">
        <label for="shield_{{ $index }}_weight">Weight</label>
        <div class="input-group">
          <input type="number" class="form-control" id="shield_{{ $index }}_weight" ng-model="item.weight" />
          <span class="input-group-addon">lb.</span>
        </div>
      </div>

      <div class="form-group col-xs-12 col-xm-12 col-md-12 col-lg-12">
        <label for="shield_{{ $index }}_special">Special Properties / Notes</label>
        <textarea class="form-control" id="shield_{{ $index }}_special" ng-model="item.special">
        </textarea>
      </div>
    </div>
  </div>
</div>
<!-- End Shield -->

<!-- Begin Protective Item -->
<div class="col-xs-12 col-sm-6 col-md-6 col-lg-4 armoritems" ng-repeat="item in sheet.protective_item">
  <div class="panel" ng-class="{'panel-success': item.equiped, 'panel-default': !item.equiped}"> 
    <div class="panel-heading">
      <div class="row">
        <div class="col-xs-2 col-sm-2 col-md-2 col-lg-2">
          <h4 class="charsheet-icon-natural" ng-if="item.type == 'natural'"></h4>
          <h4 class="charsheet-icon-deflection" ng-if="item.type == 'deflection'"></h4>
        </div> 
        <div class="col-xs-4 col-sm-4 col-md-4 col-lg-4">{{ item.name }}</div>
        <div class="col-xs-6 col-sm-6 col-md-6 col-lg-6">
          <div class="btn-group pull-right">
            <button type="button" class="btn btn-default" ng-if="item.equiped" ng-click="deactivateProtective($index)">
              <span class="glyphicon glyphicon-ban-circle"></span>
            </button>

            <button type="button" class="btn btn-default" ng-if="!item.equiped" ng-click="activateProtective($index)">
              <span class="glyphicon glyphicon-ok-circle"></span>
            </button>

            <button type="button" class="btn btn-default" ng-click="removeProtective($index)">
              <span class="glyphicon glyphicon-trash"></span>
            </button>

            <button class="btn btn-default" ng-click="notCollapsed = !notCollapsed" ng-disabled="item.name == ''" ng-init="notCollapsed = (notCollapsed || item.name == '')">
              <span class="glyphicon glyphicon-chevron-up" ng-if="notCollapsed"></span>
              <span class="glyphicon glyphicon-chevron-down" ng-if="!notCollapsed"></span>
            </button>
          </div>
        </div>
      </div>
    </div>
    <div class="panel-body row" collapse="!notCollapsed">
      <div class="form-group col-xs-8 col-sm-8 col-md-8 col-lg-8">
        <label for="protective_{{ $index }}_name">Name</label>
        <input type="text" class="form-control" id="protective_{{ $index }}_name" ng-model="item.name" />
      </div>
      <div class="form-group col-xs-4 col-sm-4 col-md-4 col-lg-4">
        <label for="protective_{{ $index }}_bonus">AC Bonus</label>
        <input type="number" class="form-control" id="protective_{{ $index }}_bonus" ng-model="item.bonus" />
      </div>

      <div class="form-group col-xs-8 col-sm-8 col-md-8 col-lg-8">
        <label for="protective_{{ $index }}_type">Type</label>
        <select class="form-control" id="protective_{{ $index }}_type" ng-model="item.type">
          <option value="natural">Natural</option>
          <option value="deflection">Deflection</option>
        </select>
      </div>
      <div class="form-group col-xs-4 col-sm-4 col-md-4 col-lg-4">
        <label for="protective_{{ $index }}_weight">Weight</label>
        <div class="input-group">
          <input type="number" class="form-control" id="protective_{{ $index }}_weight" ng-model="item.weight" />
          <span class="input-group-addon">lb.</span>
        </div>
      </div>

      <div class="form-group col-xs-12 col-xm-12 col-md-12 col-lg-12">
        <label for="protective_{{ $index }}_special">Special Properties / Notes</label>
        <textarea class="form-control" id="protective_{{ $index }}_special" ng-model="item.special">
        </textarea>
      </div>
    </div>
  </div>
</div>
<!-- End Protective Item -->
